(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,67458,(e,s,t)=>{"use strict";var a=e.r(71645).__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;t.c=function(e){return a.H.useMemoCache(e)}},932,(e,s,t)=>{"use strict";s.exports=e.r(67458)},18566,(e,s,t)=>{s.exports=e.r(76562)},43208,e=>{"use strict";var s=e.i(43476),t=e.i(932),a=e.i(71645),l=e.i(18566);function n(e){let a,l,n,i,r,o=(0,t.c)(11),{isRolling:c,onShare:d,onClear:m}=e,u=`navbar bg-base-100 rounded-2xl shadow ${c?"shake":""}`;return o[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)("span",{className:"btn btn-ghost text-xl font-mono",children:"D&D Dice Companion"})}),o[0]=a):a=o[0],o[1]!==d?(l=(0,s.jsx)("button",{className:"btn btn-secondary btn-outline mr-3",onClick:d,title:"Copy a link to this setup",children:"Share"}),o[1]=d,o[2]=l):l=o[2],o[3]!==m?(n=(0,s.jsx)("button",{className:"btn btn-outline",onClick:m,children:"Clear"}),o[3]=m,o[4]=n):n=o[4],o[5]!==l||o[6]!==n?(i=(0,s.jsxs)("div",{className:"flex-none gap-2",children:[l,n]}),o[5]=l,o[6]=n,o[7]=i):i=o[7],o[8]!==u||o[9]!==i?(r=(0,s.jsxs)("div",{className:u,children:[a,i]}),o[8]=u,o[9]=i,o[10]=r):r=o[10],r}function i(e){let a,l,n,i,r,o,c,d=(0,t.c)(22),{mode:m,setMode:u,clearMessage:x}=e,h=`tab ${"single"===m?"tab-active":""}`;d[0]!==x||d[1]!==u?(a=()=>{u("single"),x?.()},d[0]=x,d[1]=u,d[2]=a):a=d[2],d[3]!==h||d[4]!==a?(l=(0,s.jsx)("button",{className:h,onClick:a,children:"Single"}),d[3]=h,d[4]=a,d[5]=l):l=d[5];let p=`tab ${"same"===m?"tab-active":""}`;d[6]!==x||d[7]!==u?(n=()=>{u("same"),x?.()},d[6]=x,d[7]=u,d[8]=n):n=d[8],d[9]!==p||d[10]!==n?(i=(0,s.jsx)("button",{className:p,onClick:n,children:"Multiple (same)"}),d[9]=p,d[10]=n,d[11]=i):i=d[11];let b=`tab ${"mixed"===m?"tab-active":""}`;return d[12]!==x||d[13]!==u?(r=()=>{u("mixed"),x?.()},d[12]=x,d[13]=u,d[14]=r):r=d[14],d[15]!==b||d[16]!==r?(o=(0,s.jsx)("button",{className:b,onClick:r,children:"Mixed pool"}),d[15]=b,d[16]=r,d[17]=o):o=d[17],d[18]!==l||d[19]!==i||d[20]!==o?(c=(0,s.jsxs)("div",{className:"tabs tabs-boxed",children:[l,i,o]}),d[18]=l,d[19]=i,d[20]=o,d[21]=c):c=d[21],c}function r(e){let a,l,n,i=(0,t.c)(6),{modifier:r,setModifier:o}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,s.jsxs)("div",{className:"label",children:[(0,s.jsx)("span",{className:"label-text",children:"Modifier"}),(0,s.jsx)("span",{className:"label-text-alt",children:"applies to total"})]}),i[0]=a):a=i[0],i[1]!==o?(l=e=>o(e.target.value),i[1]=o,i[2]=l):l=i[2],i[3]!==r||i[4]!==l?(n=(0,s.jsxs)("label",{className:"form-control w-full sm:max-w-xs",children:[a,(0,s.jsx)("input",{type:"number",className:"input input-bordered w-full",value:r,onChange:l,placeholder:"0"})]}),i[3]=r,i[4]=l,i[5]=n):n=i[5],n}function o(e){return Math.floor(Math.random()*(e-1+1))+1}function c(e){let s=Number(e);return Number.isFinite(s)?Math.trunc(s):null}function d(e){let s=c(e);return null===s?{ok:!1,message:"Sides must be a number."}:s<2?{ok:!1,message:"Sides must be at least 2."}:s>1e6?{ok:!1,message:"Sides is too large."}:{ok:!0,value:s}}function m(e){let s=c(e);return null===s?{ok:!1,message:"Count must be a number."}:s<1?{ok:!1,message:"Count must be at least 1."}:s>200?{ok:!1,message:"Count cannot exceed 200."}:{ok:!0,value:s}}function u(e){let a,l,n,i,r,o,d,m,u,x,h,p,b,f,g,j=(0,t.c)(38),{singleSides:N,setSingleSides:v,singleRollType:y,setSingleRollType:S}=e;j[0]!==N?(a=c(N)??20,j[0]=N,j[1]=a):a=j[1];let w=20===a;j[2]===Symbol.for("react.memo_cache_sentinel")?(l=(0,s.jsx)("span",{className:"label-text",children:"Sides"}),j[2]=l):l=j[2],j[3]!==N?(n=(0,s.jsxs)("div",{className:"label",children:[l,(0,s.jsxs)("span",{className:"label-text-alt",children:["d",N]})]}),j[3]=N,j[4]=n):n=j[4],j[5]!==v?(i=e=>v(e.target.value),j[5]=v,j[6]=i):i=j[6],j[7]!==N||j[8]!==i?(r=(0,s.jsx)("input",{type:"number",min:2,className:"input input-bordered w-full",value:N,onChange:i}),j[7]=N,j[8]=i,j[9]=r):r=j[9],j[10]!==n||j[11]!==r?(o=(0,s.jsxs)("label",{className:"form-control w-full sm:max-w-xs",children:[n,r]}),j[10]=n,j[11]=r,j[12]=o):o=j[12],j[13]===Symbol.for("react.memo_cache_sentinel")?(d=(0,s.jsxs)("div",{className:"label",children:[(0,s.jsx)("span",{className:"label-text",children:"d20 Options"}),(0,s.jsx)("span",{className:"label-text-alt",children:"adv/dis only for d20"})]}),j[13]=d):d=j[13];let k=`btn join-item w-1/3 ${"normal"===y?"btn-active":""}`;j[14]!==S?(m=()=>S("normal"),j[14]=S,j[15]=m):m=j[15],j[16]!==k||j[17]!==m?(u=(0,s.jsx)("button",{className:k,onClick:m,children:"Normal"}),j[16]=k,j[17]=m,j[18]=u):u=j[18];let C=`btn join-item w-1/3 ${"adv"===y?"btn-active":""}`;j[19]!==S?(x=()=>S("adv"),j[19]=S,j[20]=x):x=j[20];let _=!w;j[21]!==C||j[22]!==x||j[23]!==_?(h=(0,s.jsx)("button",{className:C,onClick:x,disabled:_,title:"Roll 2d20 keep highest",children:"Advantage"}),j[21]=C,j[22]=x,j[23]=_,j[24]=h):h=j[24];let R=`btn join-item w-1/3 ${"dis"===y?"btn-active":""}`;j[25]!==S?(p=()=>S("dis"),j[25]=S,j[26]=p):p=j[26];let T=!w;return j[27]!==R||j[28]!==p||j[29]!==T?(b=(0,s.jsx)("button",{className:R,onClick:p,disabled:T,title:"Roll 2d20 keep lowest",children:"Disadv."}),j[27]=R,j[28]=p,j[29]=T,j[30]=b):b=j[30],j[31]!==u||j[32]!==h||j[33]!==b?(f=(0,s.jsxs)("div",{className:"flex-1",children:[d,(0,s.jsxs)("div",{className:"join w-full",children:[u,h,b]})]}),j[31]=u,j[32]=h,j[33]=b,j[34]=f):f=j[34],j[35]!==f||j[36]!==o?(g=(0,s.jsx)("section",{className:"grid gap-4",children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[o,f]})}),j[35]=f,j[36]=o,j[37]=g):g=j[37],g}function x(e){let a,l,n,i,r,o,c,d,m,u=(0,t.c)(20),{sameCount:x,setSameCount:h,sameSides:p,setSameSides:b}=e;return u[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,s.jsxs)("div",{className:"label",children:[(0,s.jsx)("span",{className:"label-text",children:"Count"}),(0,s.jsxs)("span",{className:"label-text-alt",children:["max ",200]})]}),u[0]=a):a=u[0],u[1]!==h?(l=e=>h(e.target.value),u[1]=h,u[2]=l):l=u[2],u[3]!==x||u[4]!==l?(n=(0,s.jsxs)("label",{className:"form-control",children:[a,(0,s.jsx)("input",{type:"number",min:1,max:200,className:"input input-bordered",value:x,onChange:l})]}),u[3]=x,u[4]=l,u[5]=n):n=u[5],u[6]===Symbol.for("react.memo_cache_sentinel")?(i=(0,s.jsx)("span",{className:"label-text",children:"Sides"}),u[6]=i):i=u[6],u[7]!==p?(r=(0,s.jsxs)("div",{className:"label",children:[i,(0,s.jsxs)("span",{className:"label-text-alt",children:["d",p]})]}),u[7]=p,u[8]=r):r=u[8],u[9]!==b?(o=e=>b(e.target.value),u[9]=b,u[10]=o):o=u[10],u[11]!==p||u[12]!==o?(c=(0,s.jsx)("input",{type:"number",min:2,className:"input input-bordered",value:p,onChange:o}),u[11]=p,u[12]=o,u[13]=c):c=u[13],u[14]!==r||u[15]!==c?(d=(0,s.jsxs)("label",{className:"form-control",children:[r,c]}),u[14]=r,u[15]=c,u[16]=d):d=u[16],u[17]!==n||u[18]!==d?(m=(0,s.jsx)("section",{className:"grid gap-4",children:(0,s.jsxs)("div",{className:"grid sm:grid-cols-2 gap-4",children:[n,d]})}),u[17]=n,u[18]=d,u[19]=m):m=u[19],m}function h(e){let a,l,n,i,r,o,c,d,m,u,x=(0,t.c)(28),{pool:h,setPool:f}=e;x[0]!==h?(a=h.reduce(b,0),x[0]=h,x[1]=a):a=x[1];let g=a;x[2]!==f?(l=function(){f(p)},x[2]=f,x[3]=l):l=x[3];let j=l;x[4]!==f?(n=function(e){f(s=>s.filter(s=>s.id!==e))},x[4]=f,x[5]=n):n=x[5];let N=n;x[6]!==f?(i=function(e,s,t){f(a=>a.map(a=>a.id===e?{...a,[s]:t}:a))},x[6]=f,x[7]=i):i=x[7];let v=i;if(x[8]!==g?(r=(0,s.jsxs)("div",{className:"text-sm opacity-70",children:["Total dice in pool: ",(0,s.jsx)("span",{className:"font-semibold",children:g})," ","/ ",200]}),x[8]=g,x[9]=r):r=x[9],x[10]!==j?(o=(0,s.jsx)("button",{className:"btn btn-outline btn-sm",onClick:j,children:"+ Add die type"}),x[10]=j,x[11]=o):o=x[11],x[12]!==r||x[13]!==o?(c=(0,s.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[r,o]}),x[12]=r,x[13]=o,x[14]=c):c=x[14],x[15]!==h||x[16]!==N||x[17]!==v){let e;x[19]!==h.length||x[20]!==N||x[21]!==v?(e=(e,t)=>(0,s.jsxs)("div",{className:"grid grid-cols-12 gap-3 items-end bg-base-200 rounded-xl p-3",children:[(0,s.jsx)("div",{className:"col-span-12 sm:col-span-5",children:(0,s.jsxs)("label",{className:"form-control",children:[(0,s.jsxs)("div",{className:"label",children:[(0,s.jsx)("span",{className:"label-text",children:"Count"}),(0,s.jsxs)("span",{className:"label-text-alt",children:["Row ",t+1]})]}),(0,s.jsx)("input",{type:"number",min:1,max:200,className:"input input-bordered",value:e.count,onChange:s=>v(e.id,"count",s.target.value)})]})}),(0,s.jsx)("div",{className:"col-span-12 sm:col-span-5",children:(0,s.jsxs)("label",{className:"form-control",children:[(0,s.jsxs)("div",{className:"label",children:[(0,s.jsx)("span",{className:"label-text",children:"Sides"}),(0,s.jsxs)("span",{className:"label-text-alt",children:["d",e.sides]})]}),(0,s.jsx)("input",{type:"number",min:2,className:"input input-bordered",value:e.sides,onChange:s=>v(e.id,"sides",s.target.value)})]})}),(0,s.jsx)("div",{className:"col-span-12 sm:col-span-2",children:(0,s.jsx)("button",{className:"btn btn-ghost w-full",onClick:()=>N(e.id),disabled:h.length<=1,children:"Remove"})})]},e.id),x[19]=h.length,x[20]=N,x[21]=v,x[22]=e):e=x[22],d=h.map(e),x[15]=h,x[16]=N,x[17]=v,x[18]=d}else d=x[18];return x[23]!==d?(m=(0,s.jsx)("div",{className:"grid gap-3",children:d}),x[23]=d,x[24]=m):m=x[24],x[25]!==c||x[26]!==m?(u=(0,s.jsxs)("section",{className:"grid gap-4",children:[c,m]}),x[25]=c,x[26]=m,x[27]=u):u=x[27],u}function p(e){return[...e,{id:String(Date.now())+Math.random(),count:1,sides:6}]}function b(e,s){return e+(c(s.count)??0)}function f(e){let a,l,n,i,r=(0,t.c)(12),{isRolling:o,rollButtonLabel:c,onRoll:d,onCleanUrl:m}=e;return r[0]!==o||r[1]!==c?(a=o?(0,s.jsxs)("span",{className:"inline-flex items-center gap-2",children:[(0,s.jsx)("span",{className:"loading loading-spinner loading-sm"}),"Rollingâ€¦"]}):c,r[0]=o,r[1]=c,r[2]=a):a=r[2],r[3]!==o||r[4]!==d||r[5]!==a?(l=(0,s.jsx)("button",{className:"btn btn-primary",onClick:d,disabled:o,children:a}),r[3]=o,r[4]=d,r[5]=a,r[6]=l):l=r[6],r[7]!==m?(n=(0,s.jsx)("button",{className:"btn btn-outline",onClick:m,title:"Remove share state from URL",children:"Clean URL"}),r[7]=m,r[8]=n):n=r[8],r[9]!==l||r[10]!==n?(i=(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[l,n]}),r[9]=l,r[10]=n,r[11]=i):i=r[11],i}function g(e){let a,l=(0,t.c)(6),{sides:n,value:i}=e,r=20===n,o=r&&20===i,c=r&&1===i;if(!r){let e;return l[0]!==i?(e=(0,s.jsx)("span",{className:"badge badge-ghost",children:i}),l[0]=i,l[1]=e):e=l[1],e}if(o){let e;return l[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)("span",{className:"badge badge-success font-semibold",children:"20"}),l[2]=e):e=l[2],e}if(c){let e;return l[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)("span",{className:"badge badge-error font-semibold",children:"1"}),l[3]=e):e=l[3],e}return l[4]!==i?(a=(0,s.jsx)("span",{className:"badge badge-ghost",children:i}),l[4]=i,l[5]=a):a=l[5],a}function j(e){let a,l,n=(0,t.c)(4),{entry:i}=e;return n[0]!==i.dice?(a=i.dice.map(N),n[0]=i.dice,n[1]=a):a=n[1],n[2]!==a?(l=(0,s.jsx)("div",{className:"grid gap-2",children:a}),n[2]=a,n[3]=l):l=n[3],l}function N(e,t){return(0,s.jsxs)("div",{className:"text-sm opacity-90",children:[(0,s.jsxs)("span",{className:"font-semibold",children:["d",e.sides,":"]})," ",(0,s.jsx)("span",{className:"inline-flex flex-wrap gap-1 align-middle",children:e.results.map((t,a)=>(0,s.jsx)(g,{sides:e.sides,value:t},a))})]},`${e.sides}-${t}`)}function v(e){let a,l,n,i=(0,t.c)(9),{isRolling:r,lastRoll:o,onReroll:c,onCopyShare:d}=e,m=`bg-base-100 rounded-2xl shadow p-4 sm:p-6 ${r?"shake":""}`;return i[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,s.jsx)("h2",{className:"text-lg font-semibold",children:"Last Roll"}),i[0]=a):a=i[0],i[1]!==r||i[2]!==o||i[3]!==d||i[4]!==c?(l=o?(0,s.jsxs)("div",{className:"mt-4 grid gap-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,s.jsx)("div",{className:"badge badge-outline",children:o.label}),(0,s.jsx)("div",{className:"text-sm opacity-70 whitespace-nowrap",children:o.at})]}),(0,s.jsxs)("div",{className:"stats stats-vertical bg-base-200 rounded-xl",children:[(0,s.jsxs)("div",{className:"stat",children:[(0,s.jsx)("div",{className:"stat-title",children:"Subtotal"}),(0,s.jsx)("div",{className:"stat-value text-2xl",children:o.subtotal})]}),(0,s.jsxs)("div",{className:"stat",children:[(0,s.jsx)("div",{className:"stat-title",children:"Modifier"}),(0,s.jsx)("div",{className:"stat-value text-2xl",children:o.modifier>=0?`+${o.modifier}`:o.modifier})]}),(0,s.jsxs)("div",{className:"stat",children:[(0,s.jsx)("div",{className:"stat-title",children:"Total"}),(0,s.jsx)("div",{className:"stat-value",children:o.total}),o.meta?.keep&&(0,s.jsxs)("div",{className:"stat-desc",children:["Kept ","high"===o.meta.keep?"highest":"lowest",":"," ",(0,s.jsx)("span",{className:"font-semibold",children:o.meta.kept})," ","(dropped ",o.meta.dropped,")"]})]})]}),(0,s.jsx)("div",{className:"bg-base-200 rounded-xl p-3",children:(0,s.jsx)(j,{entry:o})}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{className:"btn btn-outline",onClick:c,disabled:r,children:"Re-roll"}),(0,s.jsx)("button",{className:"btn btn-ghost",onClick:d,children:"Copy share link"})]})]}):(0,s.jsx)("p",{className:"mt-3 opacity-70",children:"Roll some dice to see results here."}),i[1]=r,i[2]=o,i[3]=d,i[4]=c,i[5]=l):l=i[5],i[6]!==m||i[7]!==l?(n=(0,s.jsxs)("div",{className:m,children:[a,l]}),i[6]=m,i[7]=l,i[8]=n):n=i[8],n}function y(e){let a,l,n,i,r,o,c,d=(0,t.c)(16),{history:m,onClearHistory:u,onClearLastRoll:x}=e;return d[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,s.jsx)("h2",{className:"text-lg font-semibold",children:"History"}),d[0]=a):a=d[0],d[1]!==m.length?(l=(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[a,(0,s.jsxs)("span",{className:"badge",children:[m.length,"/50"]})]}),d[1]=m.length,d[2]=l):l=d[2],d[3]!==m?(n=0===m.length?(0,s.jsx)("p",{className:"mt-3 opacity-70",children:"No rolls yet."}):(0,s.jsx)("div",{className:"mt-4 grid gap-3 max-h-[480px] overflow-auto pr-1",children:m.map(S)}),d[3]=m,d[4]=n):n=d[4],d[5]!==u?(i=(0,s.jsx)("button",{className:"btn btn-outline btn-sm",onClick:u,children:"Clear history"}),d[5]=u,d[6]=i):i=d[6],d[7]!==x?(r=(0,s.jsx)("button",{className:"btn btn-ghost btn-sm",onClick:x,children:"Clear last roll"}),d[7]=x,d[8]=r):r=d[8],d[9]!==i||d[10]!==r?(o=(0,s.jsxs)("div",{className:"mt-4 flex gap-2",children:[i,r]}),d[9]=i,d[10]=r,d[11]=o):o=d[11],d[12]!==l||d[13]!==n||d[14]!==o?(c=(0,s.jsxs)("div",{className:"bg-base-100 rounded-2xl shadow p-4 sm:p-6",children:[l,n,o]}),d[12]=l,d[13]=n,d[14]=o,d[15]=c):c=d[15],c}function S(e){return(0,s.jsxs)("div",{className:"bg-base-200 rounded-xl p-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,s.jsx)("div",{className:"font-medium",children:e.label}),(0,s.jsx)("div",{className:"text-sm opacity-70 whitespace-nowrap",children:e.at})]}),(0,s.jsxs)("div",{className:"mt-2 flex items-center justify-between gap-3",children:[(0,s.jsxs)("div",{className:"text-sm opacity-80",children:["subtotal ",e.subtotal," ",e.modifier?(0,s.jsxs)(s.Fragment,{children:[e.modifier>=0?`+${e.modifier}`:e.modifier," = "]}):" = ",(0,s.jsx)("span",{className:"font-semibold",children:e.total})]}),e.dice.some(k)&&(0,s.jsx)("span",{className:"badge badge-success",children:"Crit 20"}),e.dice.some(w)&&(0,s.jsx)("span",{className:"badge badge-error",children:"Nat 1"})]}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)(j,{entry:e})})]},e.id)}function w(e){return 20===e.sides&&e.results.includes(1)}function k(e){return 20===e.sides&&e.results.includes(20)}function C(){return"u">typeof crypto&&crypto.randomUUID?crypto.randomUUID():String(Date.now())+"-"+String(Math.random()).slice(2)}function _(){return new Date().toLocaleString()}function R(){let e,p,b,g,j,N,S,w,k,R,L,B,O,P,E,I,V,F,H,K,q,G,J,Q,W,Y,z,X,Z,ee,es,et,ea,el=(0,t.c)(94),en=(0,l.useRouter)(),ei=(0,l.useSearchParams)(),{play:er}={play:function(){try{let e=window.AudioContext||window.webkitAudioContext;if(!e)return;let s=new e,t=s.currentTime,a=Math.floor(.12*s.sampleRate),l=s.createBuffer(1,a,s.sampleRate),n=l.getChannelData(0);for(let e=0;e<a;e++){let s=e/a;n[e]=(2*Math.random()-1)*(1-s)*.8}let i=s.createBufferSource();i.buffer=l;let r=s.createBiquadFilter();r.type="bandpass",r.frequency.setValueAtTime(900+400*Math.random(),t),r.Q.setValueAtTime(1.2,t);let o=s.createGain();o.gain.setValueAtTime(1e-4,t),o.gain.exponentialRampToValueAtTime(.35,t+.01),o.gain.exponentialRampToValueAtTime(1e-4,t+.12),i.connect(r),r.connect(o),o.connect(s.destination),i.start(t),i.stop(t+.12),i.onended=()=>{try{s.close()}catch{}}}catch{}}},[eo,ec]=(0,a.useState)("single"),[ed,em]=(0,a.useState)(20),[eu,ex]=(0,a.useState)("normal"),[eh,ep]=(0,a.useState)(2),[eb,ef]=(0,a.useState)(6);el[0]===Symbol.for("react.memo_cache_sentinel")?(e=[{id:C(),count:2,sides:20},{id:C(),count:1,sides:8}],el[0]=e):e=el[0];let[eg,ej]=(0,a.useState)(e),[eN,ev]=(0,a.useState)(0),[ey,eS]=(0,a.useState)(null);el[1]===Symbol.for("react.memo_cache_sentinel")?(p=[],el[1]=p):p=el[1];let[ew,ek]=(0,a.useState)(p),[eC,e_]=(0,a.useState)(""),[eR,eT]=(0,a.useState)(!1);el[2]===Symbol.for("react.memo_cache_sentinel")?(b=function(e){eS(e),ek(s=>[e,...s].slice(0,50))},el[2]=b):b=el[2];let eA=b;el[3]===Symbol.for("react.memo_cache_sentinel")?(g=function(){eS(null),ek([]),e_("")},el[3]=g):g=el[3];let eM=g;el[4]!==er?(j=function(){eT(!0),er(),window.setTimeout(()=>eT(!1),420)},el[4]=er,el[5]=j):j=el[5];let e$=j;el[6]!==eo||el[7]!==eN||el[8]!==eg||el[9]!==eh||el[10]!==eb||el[11]!==eu||el[12]!==ed?(N=function(){return{mode:eo,modifier:c(eN)??0,single:{sides:c(ed)??20,rollType:eu},same:{count:c(eh)??2,sides:c(eb)??6},mixed:{pool:eg.map(D)}}},el[6]=eo,el[7]=eN,el[8]=eg,el[9]=eh,el[10]=eb,el[11]=eu,el[12]=ed,el[13]=N):N=el[13];let eU=N;el[14]===Symbol.for("react.memo_cache_sentinel")?(S=function(e){e?.mode&&ec(e.mode),"number"==typeof e?.modifier&&ev(e.modifier),e?.single&&(null!=e.single.sides&&em(e.single.sides),e.single.rollType&&ex(e.single.rollType)),e?.same&&(null!=e.same.count&&ep(e.same.count),null!=e.same.sides&&ef(e.same.sides)),e?.mixed?.pool&&Array.isArray(e.mixed.pool)&&ej(e.mixed.pool)},el[14]=S):S=el[14];let eD=S;el[15]!==en?(w=()=>{let e=new URL(window.location.href);e.searchParams.delete("s"),en.replace(e.pathname+e.search,{scroll:!1}),e_("Bad share link removed from URL."),window.setTimeout(()=>e_(""),1200)},el[15]=en,el[16]=w):w=el[16],el[17]!==eU||el[18]!==en||el[19]!==ei||el[20]!==w?(k={searchParams:ei,router:en,getState:eU,applyState:eD,onBadState:w},el[17]=eU,el[18]=en,el[19]=ei,el[20]=w,el[21]=k):k=el[21];let{copyShareLink:eL,cleanUrl:eB}=function({searchParams:e,router:s,getState:t,applyState:l,onBadState:n}){function i(){let e=btoa(unescape(encodeURIComponent(JSON.stringify(t())))).replaceAll("+","-").replaceAll("/","_").replaceAll("=",""),s=new URL(window.location.href);return s.searchParams.set("s",e),s.toString()}async function r(){let e=i();await navigator.clipboard.writeText(e)}return(0,a.useEffect)(()=>{let s=e.get("s");if(s)try{let e,t,a=(t=(e=s.replaceAll("-","+").replaceAll("_","/")).length%4==0?"":"=".repeat(4-e.length%4),decodeURIComponent(escape(atob(e+t)))),n=JSON.parse(a);n?.mixed?.pool&&Array.isArray(n.mixed.pool)&&(n.mixed.pool=n.mixed.pool.map(e=>({id:C(),count:c(e.count)??1,sides:c(e.sides)??6}))),l(n)}catch{n?.()}},[]),{buildShareUrl:i,copyShareLink:r,cleanUrl:function(){let e=new URL(window.location.href);e.searchParams.delete("s"),s.replace(e.pathname+e.search,{scroll:!1})}}}(k);el[22]!==eL?(R=async function(){try{await eL(),e_("Share link copied to clipboard."),window.setTimeout(()=>e_(""),1400)}catch{e_("Could not copy link (clipboard permission issue).")}},el[22]=eL,el[23]=R):R=el[23];let eO=R;el[24]!==e$||el[25]!==eo||el[26]!==eN||el[27]!==eg||el[28]!==eh||el[29]!==eb||el[30]!==eu||el[31]!==ed?(L=function(){let e;e_("");let s=null===(e=c(eN))?{ok:!1,message:"Modifier must be a number."}:e<-1e6||e>1e6?{ok:!1,message:"Modifier is too large."}:{ok:!0,value:e};if(!s.ok)return e_(s.message);if(e$(),"single"===eo){let e=d(ed);if(!e.ok)return e_(e.message);let t=e.value,a=20===t?eu:"normal";if("adv"===a||"dis"===a){let e=o(20),t=o(20),l="adv"===a?Math.max(e,t):Math.min(e,t),n="adv"===a?Math.min(e,t):Math.max(e,t),i=l+s.value;return eA({id:C(),at:_(),label:"adv"===a?"2d20 (Advantage)":"2d20 (Disadvantage)",dice:[{sides:20,results:[e,t]}],subtotal:l,modifier:s.value,total:i,meta:{keep:"adv"===a?"high":"low",kept:l,dropped:n}})}let l=o(t),n=l+s.value;return eA({id:C(),at:_(),label:`1d${t}`,dice:[{sides:t,results:[l]}],subtotal:l,modifier:s.value,total:n})}if("same"===eo){let e=m(eh);if(!e.ok)return e_(e.message);let t=d(eb);if(!t.ok)return e_(t.message);let a=Array.from({length:e.value},()=>o(t.value)),l=a.reduce((e,s)=>e+s,0),n=l+s.value;return eA({id:C(),at:_(),label:`${e.value}d${t.value}`,dice:[{sides:t.value,results:a}],subtotal:l,modifier:s.value,total:n})}if("mixed"===eo){let e=[];for(let s of eg){let t=m(s.count);if(!t.ok)return e_(`Row count error: ${t.message}`);let a=d(s.sides);if(!a.ok)return e_(`Row sides error: ${a.message}`);e.push({count:t.value,sides:a.value})}let t=e.reduce(U,0);if(t<2)return e_("Mixed pool must roll at least 2 dice.");if(t>200)return e_("Total dice in pool cannot exceed 200.");let a=e.map($),l=e.map(M).join(" + "),n=a.flatMap(A).reduce(T,0),i=n+s.value;return eA({id:C(),at:_(),label:l,dice:a,subtotal:n,modifier:s.value,total:i})}},el[24]=e$,el[25]=eo,el[26]=eN,el[27]=eg,el[28]=eh,el[29]=eb,el[30]=eu,el[31]=ed,el[32]=L):L=el[32];let eP=L;e:{if("single"===eo){let e;el[33]!==ed?(e=c(ed)??20,el[33]=ed,el[34]=e):e=el[34];let s=e;if(20===s&&"adv"===eu){B="Roll Advantage";break e}if(20===s&&"dis"===eu){B="Roll Disadvantage";break e}B=`Roll 1d${s}`;break e}if("same"===eo){B=`Roll ${eh}d${eb}`;break e}B="Roll Pool"}let eE=B;el[35]===Symbol.for("react.memo_cache_sentinel")?(O=(0,s.jsx)("style",{children:"\n        @keyframes diceShake {\n          0% { transform: translate(0, 0) rotate(0deg); }\n          20% { transform: translate(-2px, 1px) rotate(-1deg); }\n          40% { transform: translate(3px, -1px) rotate(1deg); }\n          60% { transform: translate(-2px, -1px) rotate(0deg); }\n          80% { transform: translate(2px, 1px) rotate(1deg); }\n          100% { transform: translate(0, 0) rotate(0deg); }\n        }\n        .shake { animation: diceShake 420ms ease-in-out; }\n      "}),el[35]=O):O=el[35],el[36]!==eR||el[37]!==eO?(P=(0,s.jsx)(n,{isRolling:eR,onShare:eO,onClear:eM}),el[36]=eR,el[37]=eO,el[38]=P):P=el[38];let eI=`mt-6 bg-base-100 rounded-2xl shadow p-4 sm:p-6 ${eR?"shake":""}`;return el[39]===Symbol.for("react.memo_cache_sentinel")?(E=()=>e_(""),el[39]=E):E=el[39],el[40]!==eo?(I=(0,s.jsx)(i,{mode:eo,setMode:ec,clearMessage:E}),el[40]=eo,el[41]=I):I=el[41],el[42]!==eN?(V=(0,s.jsx)(r,{modifier:eN,setModifier:ev}),el[42]=eN,el[43]=V):V=el[43],el[44]!==I||el[45]!==V?(F=(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 sm:items-center sm:justify-between",children:[I,V]}),el[44]=I,el[45]=V,el[46]=F):F=el[46],el[47]!==eo||el[48]!==eu||el[49]!==ed?(H="single"===eo&&(0,s.jsx)(u,{singleSides:ed,setSingleSides:em,singleRollType:eu,setSingleRollType:ex}),el[47]=eo,el[48]=eu,el[49]=ed,el[50]=H):H=el[50],el[51]!==eo||el[52]!==eh||el[53]!==eb?(K="same"===eo&&(0,s.jsx)(x,{sameCount:eh,setSameCount:ep,sameSides:eb,setSameSides:ef}),el[51]=eo,el[52]=eh,el[53]=eb,el[54]=K):K=el[54],el[55]!==eo||el[56]!==eg?(q="mixed"===eo&&(0,s.jsx)(h,{pool:eg,setPool:ej}),el[55]=eo,el[56]=eg,el[57]=q):q=el[57],el[58]!==eB?(G=()=>{eB(),e_("Share state cleared from URL."),window.setTimeout(()=>e_(""),1200)},el[58]=eB,el[59]=G):G=el[59],el[60]!==eR||el[61]!==eP||el[62]!==eE||el[63]!==G?(J=(0,s.jsx)(f,{isRolling:eR,rollButtonLabel:eE,onRoll:eP,onCleanUrl:G}),el[60]=eR,el[61]=eP,el[62]=eE,el[63]=G,el[64]=J):J=el[64],el[65]!==eC?(Q=eC&&(0,s.jsx)("div",{className:`alert ${eC.includes("copied")||eC.includes("cleared")?"alert-info":"alert-error"}`,children:(0,s.jsx)("span",{children:eC})}),el[65]=eC,el[66]=Q):Q=el[66],el[67]!==H||el[68]!==K||el[69]!==q||el[70]!==J||el[71]!==Q?(W=(0,s.jsxs)("div",{className:"mt-6 grid gap-4",children:[H,K,q,J,Q]}),el[67]=H,el[68]=K,el[69]=q,el[70]=J,el[71]=Q,el[72]=W):W=el[72],el[73]!==eI||el[74]!==F||el[75]!==W?(Y=(0,s.jsxs)("div",{className:eI,children:[F,W]}),el[73]=eI,el[74]=F,el[75]=W,el[76]=Y):Y=el[76],el[77]!==eR||el[78]!==ey||el[79]!==eP||el[80]!==eO?(z=(0,s.jsx)(v,{isRolling:eR,lastRoll:ey,onReroll:eP,onCopyShare:eO}),el[77]=eR,el[78]=ey,el[79]=eP,el[80]=eO,el[81]=z):z=el[81],el[82]===Symbol.for("react.memo_cache_sentinel")?(X=()=>ek([]),Z=()=>eS(null),el[82]=X,el[83]=Z):(X=el[82],Z=el[83]),el[84]!==ew?(ee=(0,s.jsx)(y,{history:ew,onClearHistory:X,onClearLastRoll:Z}),el[84]=ew,el[85]=ee):ee=el[85],el[86]!==z||el[87]!==ee?(es=(0,s.jsxs)("div",{className:"mt-6 grid lg:grid-cols-2 gap-6",children:[z,ee]}),el[86]=z,el[87]=ee,el[88]=es):es=el[88],el[89]===Symbol.for("react.memo_cache_sentinel")?(et=(0,s.jsx)("footer",{className:"mt-10 text-center opacity-60 text-sm",children:"Built with Next.js + React + Tailwind + DaisyUI"}),el[89]=et):et=el[89],el[90]!==P||el[91]!==Y||el[92]!==es?(ea=(0,s.jsxs)(s.Fragment,{children:[O,(0,s.jsxs)("div",{className:"max-w-4xl mx-auto p-4 sm:p-8",children:[P,Y,es,et]})]}),el[90]=P,el[91]=Y,el[92]=es,el[93]=ea):ea=el[93],ea}function T(e,s){return e+s}function A(e){return e.results}function M(e){return`${e.count}d${e.sides}`}function $(e){return{sides:e.sides,results:Array.from({length:e.count},()=>o(e.sides))}}function U(e,s){return e+s.count}function D(e){return{count:c(e.count)??1,sides:c(e.sides)??6}}e.s(["default",()=>R],43208)}]);